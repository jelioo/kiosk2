<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Smart Kiosk</title>
    <link rel="stylesheet" href="css/assistant.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4ca1af">
</head>

<body>
    <div class="container">
        <header>
            <div class="school-info">
                <div class="school-logo">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div>
                    <h1 data-translate="school_name">Makati High School</h1>
                    <p class="subtitle" data-translate="subtitle">Smart Kiosk - Enhanced Navigation & Information System
                    </p>
                </div>
            </div>
            <div class="header-controls">
                <button class="lang-toggle" onclick="toggleLanguage()" id="lang-toggle-btn">
                    <i class="fas fa-globe"></i>
                    <span id="lang-display">English</span>
                </button>
                <button class="mode-toggle" id="mode-toggle-btn" onclick="toggleConnectionMode()"
                    title="Switch Online/Offline Mode">
                    <span id="mode-icon">🌐</span>
                    <span id="mode-label">Online</span>
                </button>
            </div>
        </header>
        <div class="main-content">
            <div class="sidebar">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="Search for rooms, people..."
                        data-translate-placeholder="search_placeholder" onkeypress="checkSearchEnter(event)">
                    <button id="voice-search-btn" onclick="startVoiceSearch()" title="Voice Search"><i
                            class="fas fa-microphone"></i></button>
                    <button id="search-btn" onclick="performSearch()"><i class="fas fa-search"></i></button>
                </div>
                <ul class="nav-menu">
                    <li><a href="#" onclick="setActiveNav(this); goHome()" class="active"><i class="fas fa-home"></i>
                            <span class="nav-text" data-translate="nav.home">Home</span></a></li>
                    <li><a href="#" onclick="setActiveNav(this); showCampusDirectory()"><i
                                class="fas fa-map-marked-alt"></i> <span class="nav-text"
                                data-translate="nav.directory">Campus
                                Directory</span></a></li>
                    <li><a href="#" onclick="setActiveNav(this); viewEvents()"><i class="fas fa-calendar-alt"></i>
                            <span class="nav-text" data-translate="nav.events">Events</span></a></li>
                    <li><a href="#" onclick="setActiveNav(this); AboutUs()"><i class="fas fa-user-friends"></i> <span
                                class="nav-text" data-translate="nav.about">About
                                Us</span></a></li>
                    <li><a href="#" onclick="setActiveNav(this); viewNews()"><i class="fas fa-newspaper"></i> <span
                                class="nav-text" data-translate="nav.news">News</span></a>
                    </li>
                    <li><a href="#" onclick="setActiveNav(this); viewSurvey()"><i class="fas fa-poll"></i> <span
                                class="nav-text" data-translate="nav.survey">Survey</span></a>
                    </li>
                    <li><a href="#" onclick="setActiveNav(this); viewHelp()"><i class="fas fa-question-circle"></i>
                            <span class="nav-text" data-translate="nav.help">Help</span></a></li>
                </ul>
            </div>
            <div class="content">
                <div class="welcome-banner">
                    <h2 data-translate="welcome">Welcome to Makati High School</h2>
                    <p id="date-time-display">Loading...</p>
                </div>
                <div class="card-grid" id="card-grid">
                    <div class="card" id="events-card">
                        <h3><i class="fas fa-calendar-day"></i> <span
                                data-translate="homepage.upcoming_events_title">Upcoming Events</span></h3>
                        <ul class="event-list">
                            <li><span data-translate="events.fourth_quarter_exams">Fourth Quarter Exams</span> <span
                                    class="event-date">March 19-20, 2026</span></li>
                            <li><span data-translate="events.eosy_rites">End-of-School-Year Rites</span> <span
                                    class="event-date">March 30-31, 2026</span>
                            </li>
                            <li><span data-translate="events.parent_teacher_conf">Parent-Teacher Conference</span> <span
                                    class="event-date" data-translate="events.after_quarter_exams">After Quarter
                                    Exams</span>
                            </li>
                        </ul>
                    </div>
                    <div class="card" id="announcements-card">
                        <h3><i class="fas fa-clipboard-list"></i> <span
                                data-translate="homepage.announcements_title">Announcements</span></h3>
                        <ul class="event-list">
                            <li data-translate="announcements.exams_scheduled">Fourth Quarter Exams scheduled for March
                                19 and 20, 2026</li>
                            <li data-translate="announcements.eosy_march">End-of-School-Year Rites on March 30-31, 2026
                            </li>
                            <li data-translate="announcements.submit_clearance">Submit all clearance requirements before
                                EOSY Rites</li>
                        </ul>
                    </div>
                    <div class="card schedule-card" id="schedule-card">
                        <h3><i class="fas fa-calendar-alt"></i> 📌 Class Schedule SY 2025–2026</h3>

                        <!-- Shift Tabs -->
                        <div class="sched-tabs">
                            <button class="sched-tab active" onclick="switchSchedTab('morning', this)">🌅 Morning
                                Shift</button>
                            <button class="sched-tab" onclick="switchSchedTab('afternoon', this)">🌇 Afternoon
                                Shift</button>
                            <button class="sched-tab" onclick="switchSchedTab('recess', this)">☕ Recess
                                Schedules</button>
                        </div>

                        <!-- Morning Shift -->
                        <div class="sched-panel active" id="sched-morning">
                            <div class="schedule-table-wrap">
                                <table class="schedule-table animate-table">
                                    <thead>
                                        <tr>
                                            <th>Grade / Section</th>
                                            <th>Arrival</th>
                                            <th>Start of Classes</th>
                                            <th>Dismissal</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="row-anim">
                                            <td><span class="grade-badge grade7">Grade 7</span></td>
                                            <td>5:30 AM</td>
                                            <td>5:45 AM</td>
                                            <td>12:00 NN</td>
                                        </tr>
                                        <tr class="row-anim">
                                            <td><span class="grade-badge grade10">Grade 10</span></td>
                                            <td>5:30 AM</td>
                                            <td>6:00 AM</td>
                                            <td>12:30 PM</td>
                                        </tr>
                                        <tr class="row-anim">
                                            <td><span class="grade-badge grade11">Grade 11</span></td>
                                            <td>5:45 AM</td>
                                            <td>6:00 AM</td>
                                            <td>12:30 PM</td>
                                        </tr>
                                        <tr class="row-anim">
                                            <td><span class="grade-badge gradeste">STE (Grades 7 &amp; 8)</span></td>
                                            <td>6:15 AM</td>
                                            <td>6:30 AM</td>
                                            <td><span class="multi-dismiss">MW: 4:15 PM<br>TThF: 3:35 PM</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Afternoon Shift -->
                        <div class="sched-panel" id="sched-afternoon">
                            <div class="schedule-table-wrap">
                                <table class="schedule-table animate-table">
                                    <thead>
                                        <tr>
                                            <th>Grade / Section</th>
                                            <th>Arrival</th>
                                            <th>Start of Classes</th>
                                            <th>Dismissal</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="row-anim">
                                            <td><span class="grade-badge grade8">Grade 8</span></td>
                                            <td>12:00 NN</td>
                                            <td>12:30 PM</td>
                                            <td>7:00 PM</td>
                                        </tr>
                                        <tr class="row-anim">
                                            <td><span class="grade-badge grade9">Grade 9</span></td>
                                            <td>12:00 NN</td>
                                            <td>1:00 PM</td>
                                            <td>7:00 PM</td>
                                        </tr>
                                        <tr class="row-anim">
                                            <td><span class="grade-badge grade12">Grade 12</span></td>
                                            <td>12:30 PM</td>
                                            <td>1:00 PM</td>
                                            <td>7:15 PM</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Recess Schedules -->
                        <div class="sched-panel" id="sched-recess">
                            <div class="recess-grid">

                                <!-- Grade 7 Recess -->
                                <div class="recess-block">
                                    <div class="recess-grade-header">🟢 Grade 7</div>
                                    <table class="schedule-table animate-table">
                                        <thead>
                                            <tr>
                                                <th>Time</th>
                                                <th>Sections</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="row-anim">
                                                <td>8:00 – 8:15</td>
                                                <td>Masigasig, Masikap, Masikhay, Masinop, Masipag, Masunurin, Matapat,
                                                    Matatag, Matulungin</td>
                                            </tr>
                                            <tr class="row-anim">
                                                <td>8:45 – 9:00</td>
                                                <td>Mabait, Magalang, Makabansa, MakaDiyos, Makakalikasan, Makatao,
                                                    Malikhaing, Mapagmahal</td>
                                            </tr>
                                            <tr class="row-anim">
                                                <td>9:30 – 9:45</td>
                                                <td>Josette T. Biyo (STE), Fe V. Del Mundo (STE), Maaasahan, Maagap</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Grade 8 Recess -->
                                <div class="recess-block">
                                    <div class="recess-grade-header">🟢 Grade 8</div>
                                    <table class="schedule-table animate-table">
                                        <thead>
                                            <tr>
                                                <th>Time</th>
                                                <th>Sections</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="row-anim">
                                                <td>9:05 – 9:20</td>
                                                <td>Gregorio Y. Zara (STE), Eduardo A. Quisumbing (STE)</td>
                                            </tr>
                                            <tr class="row-anim">
                                                <td>3:00 – 3:15</td>
                                                <td>Gumamela, Ilang-Ilang, Jasmine, Lirio, Orchid, Rosal, Sampaguita,
                                                    Santan, Sunflower</td>
                                            </tr>
                                            <tr class="row-anim">
                                                <td>3:45 – 4:00</td>
                                                <td>Amapola, Anthurium, Bougainvillea, Camia, Carnation, Daffodil,
                                                    Dahlia, Daisy, Everlasting, Gladiola</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Grade 9 Recess -->
                                <div class="recess-block">
                                    <div class="recess-grade-header">🟢 Grade 9</div>
                                    <table class="schedule-table animate-table">
                                        <thead>
                                            <tr>
                                                <th>Time</th>
                                                <th>Sections</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="row-anim">
                                                <td>3:00 – 3:15</td>
                                                <td>Alexandrite, Amber, Amethyst, Aquamarine, Beryl, Diamond, Emerald,
                                                    Quartz, Ruby, Sapphire, Sunstone, Zircon</td>
                                            </tr>
                                            <tr class="row-anim">
                                                <td>3:45 – 4:00</td>
                                                <td>Garnet, Gold, Gypsum, Jade, Onyx, Pearl, Pyrite</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Grade 10 Recess -->
                                <div class="recess-block">
                                    <div class="recess-grade-header">🟢 Grade 10</div>
                                    <table class="schedule-table animate-table">
                                        <thead>
                                            <tr>
                                                <th>Time</th>
                                                <th>Sections</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="row-anim">
                                                <td>8:00 – 8:15</td>
                                                <td>A. Luna, A. Mabini, J. Rizal, G. Silang, Father Zamora</td>
                                            </tr>
                                            <tr class="row-anim">
                                                <td>8:45 – 9:00</td>
                                                <td>G. Del Pilar, J.L. Escoda, Father Gomez, E. Jacinto, G.L. Jaena, S.
                                                    Kudarat, Lapu-Lapu</td>
                                            </tr>
                                            <tr class="row-anim">
                                                <td>9:30 – 9:45</td>
                                                <td>J. Abad Santos, T. Agoncillo, E. Aguinaldo, M. Aquino, A. Bonifacio,
                                                    Father Burgos</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="map-container" id="map-container">
                    <!-- ONLINE: Live Google Maps embed (shown in Online mode) -->
                    <iframe id="map-iframe" width="100%" height="400" frameborder="0" scrolling="no" marginheight="0"
                        marginwidth="0"
                        src="https://maps.google.com/maps?width=950&amp;height=400&amp;hl=en&amp;q=Gen.%20Luna%20Street%20Poblacion,%20Makati%20City%20Makati+(Makati%20High%20School)&amp;t=h&amp;z=18&amp;ie=UTF8&amp;iwloc=B&amp;output=embed"
                        style="border-radius:10px; display:block;">
                    </iframe>

                    <!-- OFFLINE: Static address card (shown in Offline mode) -->
                    <div id="offline-map-card" style="
                        display:none; width:100%; height:400px;
                        background: linear-gradient(135deg, #2c3e50, #4ca1af);
                        border-radius:10px; flex-direction:column;
                        align-items:center; justify-content:center;
                        color:white; text-align:center; padding:30px; gap:14px;
                    ">
                        <div style="font-size:3.5rem;">📍</div>
                        <h3 style="margin:0; font-size:1.4rem;">Makati High School</h3>
                        <p style="margin:0; font-size:1rem; opacity:0.9;">Gen. Luna Street Poblacion, Makati City</p>
                        <p style="margin:0; font-size:0.9rem; opacity:0.75;">Principal's Office: 890-8320 / 890-5938</p>
                        <p style="margin:0; font-size:0.82rem; opacity:0.6;">Switch to Online mode to see the live map.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <p>Makati High School Smart Kiosk | Gen. Luna Street Poblacion, Makati City | Principal's Office :
                890-8320 / 890-5938</p>
            <p>© 2025 Makati High School. All rights reserved.</p>
        </footer>
    </div>

    <!-- Campus Map Modal -->
    <div class="map-modal" id="map-modal">
        <div class="map-modal-content">
            <h3 style="margin-bottom: 15px; color: #2c3e50;"><i class="fas fa-map-marked-alt"></i> Makati High School
                Campus Map</h3>
            <img src="Intelliguide.jpg" alt="Makati High School Campus Map"
                style="max-width: 100%; max-height: 70vh; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
            <button class="close-map-modal" onclick="closeMapModal()">Close Map</button>
        </div>
    </div>

    <!-- Mini Assistant Button -->
    <div class="mini-assistant" id="mini-assistant">
        <i class="fas fa-graduation-cap"></i>
    </div>

    <!-- Assistant Modal -->
    <div class="assistant-modal" id="assistant-modal">
        <div class="modal-content">
            <h3 data-translate="assistant.title">School Assistant</h3>
            <p id="assistant-greeting" class="typing" data-translate="assistant.greeting">How can I help you today?</p>
            <div class="assistant-buttons">
                <button class="assistant-btn flash" id="schedule-btn" onclick="viewSchedule()"><i
                        class="fas fa-clock"></i> <span>View Schedule</span></button>
                <button class="assistant-btn flash" id="events-btn" onclick="viewEvents()"><i
                        class="fas fa-calendar-day"></i> <span data-translate="assistant.events">View
                        Events</span></button>
                <button class="assistant-btn flash" id="announcements-btn" onclick="readAnnouncements()"><i
                        class="fas fa-clipboard-list"></i> <span data-translate="assistant.announcements">Read
                        Announcements</span></button>

                <button class="assistant-btn" onclick="callSchool()"><i class="fas fa-phone"></i> <span
                        data-translate="assistant.call">Call School</span></button>
                <button class="assistant-btn" onclick="showDirectory()"><i class="fas fa-users"></i> <span
                        data-translate="assistant.directory">Staff Directory</span></button>
                <button class="assistant-btn" onclick="openChatbot()"><i class="fas fa-robot"></i> <span
                        data-translate="assistant.chatbot">Chat with AI</span></button>
            </div>
            <button class="close-modal" id="close-modal" data-translate="buttons.close">Close</button>
        </div>
    </div>

    <!-- Rating Modal -->
    <div class="rating-modal" id="rating-modal">
        <div class="close-rating" onclick="closeRatingModal()">&times;</div>
        <h3 style="color: #2c3e50; margin-bottom: 5px;">Rate Your Experience</h3>
        <p style="font-size: 0.9rem; color: #777;">How likely are you to recommend us?</p>
        <div class="rating-stars" id="rating-stars">
            <i class="fas fa-star" onclick="rate(1)"></i>
            <i class="fas fa-star" onclick="rate(2)"></i>
            <i class="fas fa-star" onclick="rate(3)"></i>
            <i class="fas fa-star" onclick="rate(4)"></i>
            <i class="fas fa-star" onclick="rate(5)"></i>
        </div>
    </div>







    <!-- Assistant Modal Functions -->
    <!-- Virtual Keyboard -->
    <div class="keyboard-container" id="virtual-keyboard">
        <button class="key close-keyboard" onmousedown="return false" onclick="closeKeyboard()"><i
                class="fas fa-times"></i> Close</button>
        <div class="keyboard-row">
            <button class="key" onmousedown="return false" onclick="typeKey('1')">1</button>
            <button class="key" onmousedown="return false" onclick="typeKey('2')">2</button>
            <button class="key" onmousedown="return false" onclick="typeKey('3')">3</button>
            <button class="key" onmousedown="return false" onclick="typeKey('4')">4</button>
            <button class="key" onmousedown="return false" onclick="typeKey('5')">5</button>
            <button class="key" onmousedown="return false" onclick="typeKey('6')">6</button>
            <button class="key" onmousedown="return false" onclick="typeKey('7')">7</button>
            <button class="key" onmousedown="return false" onclick="typeKey('8')">8</button>
            <button class="key" onmousedown="return false" onclick="typeKey('9')">9</button>
            <button class="key" onmousedown="return false" onclick="typeKey('0')">0</button>
        </div>
        <div class="keyboard-row">
            <button class="key" onmousedown="return false" onclick="typeKey('Q')">Q</button>
            <button class="key" onmousedown="return false" onclick="typeKey('W')">W</button>
            <button class="key" onmousedown="return false" onclick="typeKey('E')">E</button>
            <button class="key" onmousedown="return false" onclick="typeKey('R')">R</button>
            <button class="key" onmousedown="return false" onclick="typeKey('T')">T</button>
            <button class="key" onmousedown="return false" onclick="typeKey('Y')">Y</button>
            <button class="key" onmousedown="return false" onclick="typeKey('U')">U</button>
            <button class="key" onmousedown="return false" onclick="typeKey('I')">I</button>
            <button class="key" onmousedown="return false" onclick="typeKey('O')">O</button>
            <button class="key" onmousedown="return false" onclick="typeKey('P')">P</button>
        </div>
        <div class="keyboard-row">
            <button class="key special" id="caps-lock-btn" onmousedown="return false" onclick="toggleCapsLock()"><i
                    class="fas fa-arrow-up"></i></button>
            <button class="key" onmousedown="return false" onclick="typeKey('A')">A</button>
            <button class="key" onmousedown="return false" onclick="typeKey('S')">S</button>
            <button class="key" onmousedown="return false" onclick="typeKey('D')">D</button>
            <button class="key" onmousedown="return false" onclick="typeKey('F')">F</button>
            <button class="key" onmousedown="return false" onclick="typeKey('G')">G</button>
            <button class="key" onmousedown="return false" onclick="typeKey('H')">H</button>
            <button class="key" onmousedown="return false" onclick="typeKey('J')">J</button>
            <button class="key" onmousedown="return false" onclick="typeKey('K')">K</button>
            <button class="key" onmousedown="return false" onclick="typeKey('L')">L</button>
        </div>
        <div class="keyboard-row">
            <button class="key" onmousedown="return false" onclick="typeKey('Z')">Z</button>
            <button class="key" onmousedown="return false" onclick="typeKey('X')">X</button>
            <button class="key" onmousedown="return false" onclick="typeKey('C')">C</button>
            <button class="key" onmousedown="return false" onclick="typeKey('V')">V</button>
            <button class="key" onmousedown="return false" onclick="typeKey('B')">B</button>
            <button class="key" onmousedown="return false" onclick="typeKey('N')">N</button>
            <button class="key" onmousedown="return false" onclick="typeKey('M')">M</button>
            <button class="key special" onmousedown="return false" onclick="typeKey('BACKSPACE')"><i
                    class="fas fa-backspace"></i></button>
        </div>
        <div class="keyboard-row">
            <button class="key space" onmousedown="return false" onclick="typeKey('SPACE')">SPACE</button>
            <button class="key special" onmousedown="return false" onclick="typeKey('ENTER')">ENTER</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="voice_search.js"></script>
    <script src="js/building-data.js"></script>
    <script src="js/language-tts.js"></script>
    <script src="js/keyboard.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/main.js"></script>
    <script src="js/intro.js"></script>

    <!-- Online / Offline Mode Toggle Logic -->
    <script>
        // Global state — persisted across page session
        var isOnlineMode = true;
        try { isOnlineMode = localStorage.getItem('kiosk_mode') !== 'offline'; } catch (e) { }

        function applyMode(online) {
            isOnlineMode = online;
            try { localStorage.setItem('kiosk_mode', online ? 'online' : 'offline'); } catch (e) { }

            // Update button appearance
            const btn = document.getElementById('mode-toggle-btn');
            const icon = document.getElementById('mode-icon');
            const label = document.getElementById('mode-label');
            if (online) {
                icon.textContent = '🌐';
                label.textContent = 'Online';
                btn.classList.remove('mode-offline');
            } else {
                icon.textContent = '📵';
                label.textContent = 'Offline';
                btn.classList.add('mode-offline');
            }

            // Swap map section
            const iframe = document.getElementById('map-iframe');
            const offCard = document.getElementById('offline-map-card');
            if (iframe && offCard) {
                iframe.style.display = online ? 'block' : 'none';
                offCard.style.display = online ? 'none' : 'flex';
            }
        }

        function toggleConnectionMode() {
            applyMode(!isOnlineMode);
            // Refresh the News section if it's currently active
            if (window.currentView === 'news' && typeof viewNews === 'function') {
                viewNews();
            }
        }

        // Apply stored mode on load
        window.addEventListener('DOMContentLoaded', () => applyMode(isOnlineMode));
    </script>
</body>

</html>